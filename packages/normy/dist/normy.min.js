!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Normy=r():e.Normy=r()}(self,(()=>(()=>{"use strict";var e={876:e=>{var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||function(e){return e.$$typeof===t}(e)}(e)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,r){return!1!==r.clone&&r.isMergeableObject(e)?c((t=e,Array.isArray(t)?[]:{}),e,r):e;var t}function o(e,r,t){return e.concat(r).map((function(e){return n(e,t)}))}function u(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(r){return Object.propertyIsEnumerable.call(e,r)})):[]}(e))}function i(e,r){try{return r in e}catch(e){return!1}}function c(e,t,a){(a=a||{}).arrayMerge=a.arrayMerge||o,a.isMergeableObject=a.isMergeableObject||r,a.cloneUnlessOtherwiseSpecified=n;var f=Array.isArray(t);return f===Array.isArray(e)?f?a.arrayMerge(e,t,a):function(e,r,t){var o={};return t.isMergeableObject(e)&&u(e).forEach((function(r){o[r]=n(e[r],t)})),u(r).forEach((function(u){(function(e,r){return i(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))})(e,u)||(i(e,u)&&t.isMergeableObject(r[u])?o[u]=function(e,r){if(!r.customMerge)return c;var t=r.customMerge(e);return"function"==typeof t?t:c}(u,t)(e[u],r[u],t):o[u]=n(r[u],t))})),o}(e,t,a):n(t,a)}c.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,t){return c(e,t,r)}),{})};var a=c;e.exports=a}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var u=r[n]={exports:{}};return e[n](u,u.exports,t),u.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{function e(){return e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},e.apply(this,arguments)}t.r(n),t.d(n,{createNormalizer:()=>d,getId:()=>b});var r={getNormalizationObjectKey:function(e){return e.id},devLogging:!1,structuralSharing:!0},o=function e(r,t,n,o){return void 0===o&&(o=""),"string"==typeof r&&r.startsWith("@@")?e(t[r],t,n,o):Array.isArray(r)?r.map((function(r){return e(r,t,n,o)})):null===r||"object"!=typeof r||r instanceof Date?r:(n[o]?Object.entries(r).filter((function(e){var r=e[0];return n[o].includes(r)})):Object.entries(r)).reduce((function(r,u){var i=u[0],c=u[1];return r[i]=e(c,t,n,o+"."+i),r}),{})},u=t(876),i=t.n(u),c=function(e,r){return i()(e,r,{arrayMerge:function(e,r){return r},clone:!1})},a=function e(r,t,n){if(void 0===n&&(n=!0),Array.isArray(r))return r.map((function(r){return e(r,t)}));if(null!==r&&"object"==typeof r&&!(r instanceof Date)){var o=t.getNormalizationObjectKey(r);return void 0!==o&&n?"@@"+o:Object.entries(r).reduce((function(r,n){var o=n[0],u=n[1];return r[o]=e(u,t),r}),{})}return r},f=function e(t,n,o,u){return void 0===n&&(n=r),void 0===u&&(u=""),o=o||{},Array.isArray(t)?[t.reduce((function(r,t){return[].concat(r,e(t,n,o,u)[0])}),[]),o]:null===t||"object"!=typeof t||t instanceof Date?[[],o]:(void 0!==n.getNormalizationObjectKey(t)&&(o[u]=Object.keys(t)),[Object.entries(t).reduce((function(r,t){var i=t[0],c=t[1];return[].concat(r,e(c,n,o,u+"."+i)[0])}),void 0!==n.getNormalizationObjectKey(t)?[t]:[]),o])},s=function(e,t){void 0===t&&(t=r);var n=f(e,t),o=n[0],u=n[1];return[a(e,t,!0),o.reduce((function(e,r){var n=t.getNormalizationObjectKey(r);return e["@@"+n]=e["@@"+n]?c(e["@@"+n],a(r,t,!1)):a(r,t,!1),e}),{}),u]},l={queries:{},objects:{},dependentQueries:{}},y=function e(r,t){return Array.isArray(r)&&Array.isArray(t)?0===r.length?0!==t.length:r.some((function(r,n){return e(r,t[n])})):r instanceof Date&&t instanceof Date?r.getTime()!==t.getTime():null!==r&&"object"==typeof r&&null!==t&&"object"==typeof t?Object.entries(r).some((function(r){var n=r[0],o=r[1];return void 0!==(null==t?void 0:t[n])&&e(o,t[n])})):r!==t},d=function(t,n){var u=e({},r,t),i=null!=n?n:l,a={},f=function(r,t){var n;if(u.structuralSharing){if(a[r]===t)return;a[r]=t}var o,f,l=s(t,u),y=l[0],d=l[1],b=l[2],p=(o=i.queries[r]?i.queries[r].dependencies:[],{addedDependencies:(f=Object.keys(d)).filter((function(e){return!o.includes(e)})),removedDependencies:o.filter((function(e){return!f.includes(e)}))}),g=p.addedDependencies,v=p.removedDependencies;i=e({queries:e({},i.queries,(n={},n[r]={data:y,usedKeys:b,dependencies:Object.keys(d)},n))},function(r,t,n,o,u){return r=e({},r),t=e({},t),o.forEach((function(e){r[e]||(r[e]=[n]),r[e].includes(n)||(r[e]=[].concat(r[e],[n]))})),u.forEach((function(e){r[e].length>1?r[e]=r[e].filter((function(e){return e!==n})):(delete r[e],delete t[e])})),{dependentQueries:r,objects:t}}(i.dependentQueries,c(i.objects,d),r,g,v)),u.devLogging},d=function(e){return function(e,r){var t=[];return r.forEach((function(r){e[r]&&t.push.apply(t,e[r])})),Array.from(new Set(t))}(i.dependentQueries,Array.isArray(e)?e:[e])},b=function(e,r){var t={};r&&(t=s(r,u)[2]);try{return o(e,i.objects,t)}catch(e){if(e instanceof RangeError)return;throw e}};return{getNormalizedData:function(){return i},clearNormalizedData:function(){i=l,a={}},getQueriesById:d,setQuery:f,removeQuery:function(r){f(r,null);var t=e({},i.queries);delete t[r],delete a[r],i=e({},i,{queries:t}),u.devLogging},getQueriesToUpdate:function(e){var r=function(e,r){var t={};for(var n in e)y(e[n],r[n])&&(t[n]=e[n]);return t}(s(e,u)[1],i.objects),t=c(i.objects,r);return d(Object.keys(r)).map((function(e){return{queryKey:e,data:o(i.queries[e].data,t,i.queries[e].usedKeys)}}))},getObjectById:function(e,r){return b("@@"+e,r)},getQueryFragment:b}},b=function(e){return"@@"+e}})(),n})()));
//# sourceMappingURL=normy.min.js.map